import{_ as o,c as r,o as e,aM as t}from"./chunks/framework.DvFTVADX.js";const c=JSON.parse('{"title":"工作空间管理","description":"","frontmatter":{"title":"工作空间管理","author":{"name":"Yan Shicheng","link":"https://www.ikubeops.com"},"date":"2026-01-17T12:00:00.000Z","permalink":"/nova/workspaceManager","categories":["kube-nova"],"tags":["kube-nova"]},"headers":[],"relativePath":"nova/workspaceManager.md","filePath":"01.指南/10.使用/11.工作空间.md","lastUpdated":1768731971000}'),n={name:"nova/workspaceManager.md"};function s(i,a,p,l,h,d){return e(),r("div",null,a[0]||(a[0]=[t(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /01.指南/10.使用/11.工作空间.md for this page in Markdown format</div><h1 id="工作空间管理" tabindex="-1">工作空间管理 <a class="header-anchor" href="#工作空间管理" aria-label="Permalink to &quot;工作空间管理&quot;">​</a></h1><p>✨ <strong>特性:</strong></p><ul><li>Namespace 可视化管理: 工作空间与 Kubernetes Namespace 一一对应</li><li>多维度资源配额: 支持 CPU、内存、GPU、存储、Pod 等资源配额设置</li><li>细粒度限制策略: Pod 级别、容器级别的资源限制与默认值配置</li><li>实时监控面板: 资源使用、配额消耗、指标趋势、Pod 排行榜</li><li>跨项目迁移: 支持工作空间在项目间无缝迁移</li></ul><h2 id="核心概念" tabindex="-1">核心概念 <a class="header-anchor" href="#核心概念" aria-label="Permalink to &quot;核心概念&quot;">​</a></h2><p>工作空间是 Kube Nova 中对 Kubernetes Namespace 的抽象封装。每个工作空间对应集群中的一个 Namespace，是项目内资源隔离和管理的基本单位。</p><h3 id="自动同步与默认项目" tabindex="-1">自动同步与默认项目 <a class="header-anchor" href="#自动同步与默认项目" aria-label="Permalink to &quot;自动同步与默认项目&quot;">​</a></h3><p>当 Kube Nova 平台同步集群数据时，会自动发现集群中已存在的 Namespace。这些通过同步发现的 Namespace 会被自动归属到「默认项目」下，作为未分配的工作空间进行管理。</p><p>这种设计确保了集群中所有的 Namespace 都能被平台纳管，不会出现&quot;漏管&quot;的情况。但在实际使用中，建议将这些自动同步的工作空间迁移到对应的业务项目中，以便进行更精细的资源管理和成本核算。</p><h3 id="工作空间与资源池的关系" tabindex="-1">工作空间与资源池的关系 <a class="header-anchor" href="#工作空间与资源池的关系" aria-label="Permalink to &quot;工作空间与资源池的关系&quot;">​</a></h3><p>工作空间必须创建在项目的资源池内。一个资源池（项目在某集群上的配额）可以包含多个工作空间，所有工作空间共享该资源池的配额上限。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>项目 (Project)</span></span>
<span class="line"><span>  └── 资源池 (集群 A 的配额)</span></span>
<span class="line"><span>        ├── 工作空间 1 (namespace-prod)</span></span>
<span class="line"><span>        ├── 工作空间 2 (namespace-staging)</span></span>
<span class="line"><span>        └── 工作空间 3 (namespace-dev)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="工作空间列表" tabindex="-1">工作空间列表 <a class="header-anchor" href="#工作空间列表" aria-label="Permalink to &quot;工作空间列表&quot;">​</a></h2><p><strong>操作路径</strong>：项目中心 → 工作空间</p><h3 id="页面布局" tabindex="-1">页面布局 <a class="header-anchor" href="#页面布局" aria-label="Permalink to &quot;页面布局&quot;">​</a></h3><p>页面顶部提供筛选和操作区域：</p><p><strong>集群筛选</strong> 通过下拉框选择要查看的目标集群，切换后显示该集群下当前项目的所有工作空间。</p><p><strong>项目与集群信息</strong> 显示当前项目名称、所选集群名称，以及资源池的整体使用情况（CPU、内存、存储使用百分比），便于快速了解配额消耗状态。</p><p><strong>视图切换</strong> 页面右上角提供「卡片视图」和「列表视图」两种展示模式，可根据偏好选择。</p><h3 id="工作空间卡片" tabindex="-1">工作空间卡片 <a class="header-anchor" href="#工作空间卡片" aria-label="Permalink to &quot;工作空间卡片&quot;">​</a></h3><p>每个工作空间以卡片形式展示，包含以下信息：</p><p><strong>名称与标识</strong> 显示工作空间的显示名称和对应的 Kubernetes Namespace 名称。</p><p><strong>资源配额</strong> 展示该工作空间分配的资源配额：</p><ul><li><strong>CPU</strong>：分配的 CPU 核数</li><li><strong>内存</strong>：分配的内存容量（GiB）</li><li><strong>存储</strong>：分配的临时存储容量（GiB）</li><li><strong>GPU</strong>：分配的 GPU 卡数</li><li><strong>Pod</strong>：允许创建的 Pod 数量上限</li></ul><p><strong>创建时间</strong> 显示工作空间的创建日期。</p><p><strong>状态指示</strong> 卡片底部的状态点表示工作空间的健康状态。</p><h3 id="操作菜单" tabindex="-1">操作菜单 <a class="header-anchor" href="#操作菜单" aria-label="Permalink to &quot;操作菜单&quot;">​</a></h3><p>点击工作空间卡片右上角的更多按钮（⋯），可展开操作菜单：</p><p><strong>查看详情</strong> 进入工作空间详情页，查看完整的配置信息和资源使用情况。</p><p><strong>监控</strong> 跳转到工作空间监控面板，查看实时资源使用和历史趋势。</p><p><strong>编辑配置</strong> 修改工作空间的资源配额和限制策略。</p><p><strong>迁移空间</strong> 将工作空间迁移到其他项目。</p><p><strong>删除</strong> 删除工作空间及其对应的 Namespace。</p><hr><h2 id="迁移工作空间" tabindex="-1">迁移工作空间 <a class="header-anchor" href="#迁移工作空间" aria-label="Permalink to &quot;迁移工作空间&quot;">​</a></h2><p>迁移功能用于将工作空间从当前项目转移到其他项目，这是管理自动同步资源的关键操作。</p><h3 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to &quot;使用场景&quot;">​</a></h3><p><strong>场景一：整理自动同步的资源</strong> 集群同步后，已存在的 Namespace 会被归属到默认项目。通过迁移功能，可以将这些工作空间分配到正确的业务项目中。</p><p><strong>场景二：业务调整</strong> 当组织架构调整或业务归属变更时，可以将工作空间迁移到新的项目下。</p><p><strong>场景三：资源重新规划</strong> 在进行资源池调整时，可能需要将工作空间迁移到配额更充足的项目。</p><h3 id="迁移前提条件" tabindex="-1">迁移前提条件 <a class="header-anchor" href="#迁移前提条件" aria-label="Permalink to &quot;迁移前提条件&quot;">​</a></h3><p>执行迁移操作前，请确保满足以下条件：</p><p><strong>目标项目拥有对应集群的资源池</strong> 工作空间只能迁移到在同一集群上有资源池的项目。如果目标项目没有该集群的资源池，需要先为目标项目分配资源。</p><p><strong>目标项目资源配额充足</strong> 目标项目的资源池必须有足够的剩余配额来容纳被迁移的工作空间。系统会在迁移时校验配额，如果配额不足，迁移将被拒绝。</p><h3 id="迁移操作步骤" tabindex="-1">迁移操作步骤 <a class="header-anchor" href="#迁移操作步骤" aria-label="Permalink to &quot;迁移操作步骤&quot;">​</a></h3><p><strong>操作路径</strong>：工作空间卡片 → 更多菜单（⋯）→ 迁移空间</p><ol><li><p>在弹出的「迁移工作空间」对话框中，系统会显示迁移说明，请仔细阅读。</p></li><li><p>确认「当前工作空间」和「当前项目」信息无误。</p></li><li><p>在「目标项目」下拉框中选择要迁移到的目标项目。下拉列表只会显示在当前集群上有资源池的项目。</p></li><li><p>点击「确认迁移」按钮完成操作。</p></li></ol><h3 id="迁移说明" tabindex="-1">迁移说明 <a class="header-anchor" href="#迁移说明" aria-label="Permalink to &quot;迁移说明&quot;">​</a></h3><div class="important custom-block github-alert"><p class="custom-block-title">迁移注意事项</p><p></p><ul><li>工作空间将从当前项目迁移到目标项目</li><li>迁移过程中会更新所有相关资源配额</li><li>请确保目标项目有足够的资源配额</li><li>迁移操作不可撤销，请谨慎操作</li></ul></div><h3 id="迁移原理" tabindex="-1">迁移原理 <a class="header-anchor" href="#迁移原理" aria-label="Permalink to &quot;迁移原理&quot;">​</a></h3><p>迁移操作是纯平台层的逻辑处理，不会对 Kubernetes 集群产生任何影响。具体来说：</p><p><strong>不变的内容</strong> Kubernetes 集群中的 Namespace 及其内部的所有资源（Pod、Deployment、Service 等）保持不变，工作负载不会中断。</p><p><strong>变更的内容</strong> 平台数据库中工作空间与项目的关联关系会被更新，资源配额的归属会从源项目转移到目标项目。</p><p>这种设计确保了迁移操作的安全性，即使在生产环境中执行迁移，也不会影响正在运行的业务。</p><hr><h2 id="创建工作空间" tabindex="-1">创建工作空间 <a class="header-anchor" href="#创建工作空间" aria-label="Permalink to &quot;创建工作空间&quot;">​</a></h2><p>创建工作空间的流程分为四个步骤：基础信息 → 资源配额 → 限制策略 → 确认信息。</p><p><strong>操作路径</strong>：项目中心 → 工作空间 → 点击右上角「+」按钮</p><h3 id="创建前提条件" tabindex="-1">创建前提条件 <a class="header-anchor" href="#创建前提条件" aria-label="Permalink to &quot;创建前提条件&quot;">​</a></h3><p>要在某个集群上创建工作空间，必须满足以下条件：</p><p><strong>项目已分配该集群的资源池</strong> 项目必须拥有目标集群的资源配额，才能在该集群上创建工作空间。</p><p><strong>资源配额充足</strong> 资源池中需有足够的剩余配额来满足新工作空间的资源需求。</p><p><strong>用户权限</strong> 操作用户需具有项目管理员权限或工作空间创建权限。</p><h3 id="步骤一-基础信息-必填" tabindex="-1">步骤一：基础信息（必填） <a class="header-anchor" href="#步骤一-基础信息-必填" aria-label="Permalink to &quot;步骤一：基础信息（必填）&quot;">​</a></h3><p>配置工作空间的基本标识信息。</p><p><strong>工作空间名称</strong>（必填）：输入工作空间的显示名称，用于在平台中标识和管理。支持中英文，最多 100 字符。例如：<code>开发环境</code>、<code>生产环境</code>、<code>测试环境</code> 等。</p><p><strong>命名空间</strong>（必填）：输入对应的 Kubernetes Namespace 名称。命名规则如下：</p><ul><li>必须以小写字母开头</li><li>只能包含小写字母（a-z）和连字符（-）</li><li>必须以字母结尾</li><li>例如：<code>dev-namespace</code>、<code>prod-env</code>、<code>app-staging</code></li></ul><p><strong>描述信息</strong>（可选）：详细描述工作空间的用途、负责人、相关项目等信息，最多 500 字符。</p><p>填写完成后，点击「下一步」进入资源配额配置。</p><h3 id="步骤二-资源配额-必填" tabindex="-1">步骤二：资源配额（必填） <a class="header-anchor" href="#步骤二-资源配额-必填" aria-label="Permalink to &quot;步骤二：资源配额（必填）&quot;">​</a></h3><p>资源配额配置决定了工作空间可使用的资源上限，是创建工作空间的核心步骤。</p><h4 id="集群资源概览" tabindex="-1">集群资源概览 <a class="header-anchor" href="#集群资源概览" aria-label="Permalink to &quot;集群资源概览&quot;">​</a></h4><p>页面顶部的「集群资源概览」区域实时显示当前资源池的配额使用情况，帮助您了解可分配空间：</p><ul><li><strong>CPU</strong>：已使用/总配额（核），进度条显示使用比例</li><li><strong>内存</strong>：已使用/总配额（GiB）</li><li><strong>存储</strong>：已使用/总配额（GiB）</li><li><strong>Pods</strong>：已使用/总配额（个）</li><li><strong>GPU</strong>：已使用/总配额（核）</li></ul><p>进度条颜色指示配额状态：绿色表示充足，黄色表示紧张，红色表示即将耗尽。</p><h4 id="基础资源配置" tabindex="-1">基础资源配置 <a class="header-anchor" href="#基础资源配置" aria-label="Permalink to &quot;基础资源配置&quot;">​</a></h4><p>设置工作空间的计算和存储资源配额：</p><p><strong>CPU 配额</strong>（必填）：设置工作空间可使用的 CPU 核数上限。输入框下方显示资源池的可用余量。单位可选择「核」或「毫核」。</p><p><strong>内存配额</strong>（必填）：设置工作空间可使用的内存上限。单位可选择 Gi（GiB）、Mi（MiB）等。</p><p><strong>存储配额</strong>（可选）：设置临时存储（ephemeral-storage）的配额上限。</p><p><strong>GPU 配额</strong>（可选）：设置工作空间可使用的 GPU 卡数。如果资源池没有 GPU 配额，此项将显示可用为 0。</p><h4 id="对象资源限制" tabindex="-1">对象资源限制 <a class="header-anchor" href="#对象资源限制" aria-label="Permalink to &quot;对象资源限制&quot;">​</a></h4><p>设置各类 Kubernetes 资源对象的数量限制，防止单个工作空间创建过多资源对象。</p><p><strong>工作负载类</strong></p><ul><li><strong>Pod 数量</strong>（必填）：工作空间内允许创建的 Pod 总数上限</li><li><strong>Deployment</strong>：部署数量限制</li><li><strong>StatefulSet</strong>：有状态集数量限制</li><li><strong>DaemonSet</strong>：守护进程集数量限制</li><li><strong>Job</strong>：任务数量限制</li><li><strong>CronJob</strong>：定时任务数量限制</li></ul><p><strong>网络资源类</strong></p><ul><li><strong>Service</strong>：服务数量限制</li><li><strong>Ingress</strong>：入口资源数量限制</li><li><strong>LoadBalancer</strong>：负载均衡器数量限制</li><li><strong>NodePort</strong>：NodePort 服务数量限制</li></ul><p><strong>配置与存储类</strong></p><ul><li><strong>ConfigMap</strong>：配置映射数量限制</li><li><strong>Secret</strong>：密钥数量限制</li><li><strong>PVC</strong>：持久化存储卷声明数量限制</li><li><strong>临时存储</strong>：临时存储总容量限制</li></ul><p>每个输入框下方会显示资源池的可用余量，帮助您合理分配资源。</p><h3 id="步骤三-限制策略-选填" tabindex="-1">步骤三：限制策略（选填） <a class="header-anchor" href="#步骤三-限制策略-选填" aria-label="Permalink to &quot;步骤三：限制策略（选填）&quot;">​</a></h3><p>限制策略用于设置 Pod 和容器级别的资源边界，通过 Kubernetes LimitRange 机制实现。这一步骤是可选的，但建议配置以确保资源使用的可控性。</p><h4 id="pod-级别限制" tabindex="-1">Pod 级别限制 <a class="header-anchor" href="#pod-级别限制" aria-label="Permalink to &quot;Pod 级别限制&quot;">​</a></h4><p>设置单个 Pod 可申请的资源范围：</p><p><strong>Pod 最大 CPU</strong>：单个 Pod 可使用的最大 CPU 核数。例如设置为 8 核，则任何 Pod 的 CPU limits 不能超过 8 核。</p><p><strong>Pod 最大内存</strong>：单个 Pod 可使用的最大内存。例如设置为 16 GiB。</p><p><strong>Pod 最大临时存储</strong>：单个 Pod 可使用的最大临时存储容量。</p><p><strong>Pod 最小 CPU</strong>：Pod 必须请求的最小 CPU 量。例如设置为 10 毫核，则所有 Pod 的 CPU requests 至少为 10m。</p><p><strong>Pod 最小内存</strong>：Pod 必须请求的最小内存量。</p><p><strong>Pod 最小临时存储</strong>：Pod 必须请求的最小临时存储量。</p><h4 id="容器级别限制" tabindex="-1">容器级别限制 <a class="header-anchor" href="#容器级别限制" aria-label="Permalink to &quot;容器级别限制&quot;">​</a></h4><p>设置单个容器可申请的资源范围：</p><p><strong>容器最大 CPU</strong>：单个容器可使用的最大 CPU。例如设置为 4 核。</p><p><strong>容器最大内存</strong>：单个容器可使用的最大内存。例如设置为 8 GiB。</p><p><strong>容器最大临时存储</strong>：单个容器可使用的最大临时存储。</p><p><strong>容器最小 CPU</strong>：容器必须请求的最小 CPU。例如设置为 10 毫核。</p><p><strong>容器最小内存</strong>：容器必须请求的最小内存。例如设置为 64 MiB。</p><p><strong>容器最小临时存储</strong>：容器必须请求的最小临时存储。</p><h4 id="容器默认资源" tabindex="-1">容器默认资源 <a class="header-anchor" href="#容器默认资源" aria-label="Permalink to &quot;容器默认资源&quot;">​</a></h4><p>当 Pod 或容器未指定资源请求和限制时，系统会自动应用这些默认值：</p><p><strong>默认 CPU 限制</strong>：未指定时的默认 CPU limit。例如设置为 1 核。</p><p><strong>默认内存限制</strong>：未指定时的默认内存 limit。例如设置为 1 GiB。</p><p><strong>默认临时存储限制</strong>：未指定时的默认临时存储 limit。</p><p><strong>默认 CPU 请求</strong>：未指定时的默认 CPU request。例如设置为 10 毫核。</p><p><strong>默认内存请求</strong>：未指定时的默认内存 request。例如设置为 100 MiB。</p><p><strong>默认临时存储请求</strong>：未指定时的默认临时存储 request。</p><div class="tip custom-block github-alert"><p class="custom-block-title">限制策略的作用</p><p>配置限制策略可以防止以下问题：</p><ul><li>单个 Pod/容器申请过多资源，影响其他工作负载</li><li>开发者忘记设置资源请求，导致调度问题</li><li>资源使用无约束，难以进行容量规划</li></ul></div><h3 id="步骤四-确认信息" tabindex="-1">步骤四：确认信息 <a class="header-anchor" href="#步骤四-确认信息" aria-label="Permalink to &quot;步骤四：确认信息&quot;">​</a></h3><p>确认所有配置信息无误后，点击「创建」按钮完成工作空间创建。</p><p>创建成功后：</p><ul><li>Kubernetes 集群中会创建对应的 Namespace</li><li>ResourceQuota 资源会被自动创建并应用配额限制</li><li>LimitRange 资源会被自动创建并应用限制策略（如果配置了）</li><li>工作空间会出现在工作空间列表中</li></ul><hr><h2 id="工作空间监控" tabindex="-1">工作空间监控 <a class="header-anchor" href="#工作空间监控" aria-label="Permalink to &quot;工作空间监控&quot;">​</a></h2><p>工作空间监控提供对 Namespace 级别资源使用的实时监控和历史分析。</p><p><strong>操作路径</strong>：工作空间卡片 → 更多菜单（⋯）→ 监控</p><h3 id="监控面板概览" tabindex="-1">监控面板概览 <a class="header-anchor" href="#监控面板概览" aria-label="Permalink to &quot;监控面板概览&quot;">​</a></h3><p>监控页面顶部显示工作空间的基本状态信息：</p><p><strong>状态标识</strong> 显示工作空间的运行状态（Active/Inactive）。</p><p><strong>健康分数</strong> 基于资源使用、Pod 状态等多维度指标计算的健康评分（满分 100）。</p><p><strong>当前时间</strong> 显示监控数据的采集时间。</p><h3 id="监控视图" tabindex="-1">监控视图 <a class="header-anchor" href="#监控视图" aria-label="Permalink to &quot;监控视图&quot;">​</a></h3><p>监控页面提供四个维度的监控视图，通过标签页切换：</p><h4 id="资源监控" tabindex="-1">资源监控 <a class="header-anchor" href="#资源监控" aria-label="Permalink to &quot;资源监控&quot;">​</a></h4><p>展示工作空间的核心资源使用情况：</p><p><strong>CPU 使用率</strong> 显示 CPU 的实时使用百分比和负载情况（Load）。</p><p><strong>内存使用</strong> 显示内存使用百分比和具体用量（已用/总量）。</p><p><strong>磁盘使用</strong> 显示存储资源的使用百分比。</p><p><strong>网络流量</strong> 显示入站（接收）和出站（发送）的网络流量速率。</p><p><strong>Pod 状态</strong> 显示 Pod 总数和正在运行的 Pod 数量。</p><p>页面下方提供资源使用趋势图，展示 CPU、内存等指标的历史变化，可以查看当前值、使用率、平均值和峰值。</p><h4 id="配额监控" tabindex="-1">配额监控 <a class="header-anchor" href="#配额监控" aria-label="Permalink to &quot;配额监控&quot;">​</a></h4><p>展示 ResourceQuota 的配额使用情况，帮助了解各类资源的消耗程度和剩余空间。</p><h4 id="指标监控" tabindex="-1">指标监控 <a class="header-anchor" href="#指标监控" aria-label="Permalink to &quot;指标监控&quot;">​</a></h4><p>展示更详细的 Prometheus 指标数据，包括自定义指标和系统指标。</p><h4 id="pod-资源-top-榜" tabindex="-1">Pod 资源 Top 榜 <a class="header-anchor" href="#pod-资源-top-榜" aria-label="Permalink to &quot;Pod 资源 Top 榜&quot;">​</a></h4><p>按资源消耗排序展示工作空间内的 Pod 列表，帮助快速定位资源消耗大户。可以按 CPU、内存等维度排序。</p><h3 id="监控操作" tabindex="-1">监控操作 <a class="header-anchor" href="#监控操作" aria-label="Permalink to &quot;监控操作&quot;">​</a></h3><p><strong>时间范围</strong> 通过下拉框选择查询的时间范围，如最近 30 分钟、1 小时、6 小时、24 小时等。</p><p><strong>自动刷新</strong> 开启后监控数据会定时自动刷新。</p><p><strong>手动刷新</strong> 点击「刷新数据」按钮立即获取最新数据。</p><p><strong>数据导出</strong> 点击「导出」按钮可将监控数据导出为文件。</p><hr><h2 id="编辑工作空间" tabindex="-1">编辑工作空间 <a class="header-anchor" href="#编辑工作空间" aria-label="Permalink to &quot;编辑工作空间&quot;">​</a></h2><p>编辑功能用于修改已创建工作空间的配置。</p><p><strong>操作路径</strong>：工作空间卡片 → 更多菜单（⋯）→ 编辑配置</p><h3 id="可编辑内容" tabindex="-1">可编辑内容 <a class="header-anchor" href="#可编辑内容" aria-label="Permalink to &quot;可编辑内容&quot;">​</a></h3><p><strong>基础信息</strong> 可修改工作空间名称和描述信息。注意：Namespace 名称创建后不可修改。</p><p><strong>资源配额</strong> 可调整 CPU、内存、存储、GPU、Pod 等资源的配额限制。</p><p><strong>对象资源限制</strong> 可调整各类 Kubernetes 资源对象的数量限制。</p><p><strong>限制策略</strong> 可修改 Pod 级别、容器级别的资源限制和默认值。</p><h3 id="编辑注意事项" tabindex="-1">编辑注意事项 <a class="header-anchor" href="#编辑注意事项" aria-label="Permalink to &quot;编辑注意事项&quot;">​</a></h3><p><strong>配额增加</strong> 增加配额时，需要确保资源池有足够的剩余配额。</p><p><strong>配额减少</strong> 减少配额时，如果新配额小于当前已使用量，修改将被拒绝。需要先清理资源使用后再降低配额。</p><p><strong>限制策略变更</strong> 修改限制策略后，已存在的 Pod 不受影响，只对新创建的 Pod 生效。</p><hr><h2 id="删除工作空间" tabindex="-1">删除工作空间 <a class="header-anchor" href="#删除工作空间" aria-label="Permalink to &quot;删除工作空间&quot;">​</a></h2><p>删除功能用于移除不再需要的工作空间。</p><p><strong>操作路径</strong>：工作空间卡片 → 更多菜单（⋯）→ 删除</p><h3 id="删除影响" tabindex="-1">删除影响 <a class="header-anchor" href="#删除影响" aria-label="Permalink to &quot;删除影响&quot;">​</a></h3><p>删除工作空间是一个危险操作，会产生以下影响：</p><p><strong>Kubernetes 资源删除</strong> 对应的 Namespace 会被删除，Namespace 内的所有资源（Pod、Deployment、Service、ConfigMap、Secret、PVC 等）都会被级联删除。</p><p><strong>数据丢失</strong> 存储在 PVC 中的数据可能会丢失（取决于存储类的回收策略）。</p><p><strong>配额释放</strong> 工作空间占用的资源配额会被释放回资源池。</p><h3 id="删除前检查" tabindex="-1">删除前检查 <a class="header-anchor" href="#删除前检查" aria-label="Permalink to &quot;删除前检查&quot;">​</a></h3><p>执行删除前，建议进行以下检查：</p><ol><li>确认工作空间内没有正在运行的重要业务</li><li>备份需要保留的配置和数据</li><li>通知相关的开发和运维人员</li><li>确认 PVC 数据的处理方式</li></ol><h3 id="删除确认" tabindex="-1">删除确认 <a class="header-anchor" href="#删除确认" aria-label="Permalink to &quot;删除确认&quot;">​</a></h3><p>系统会要求二次确认删除操作，防止误删。请仔细阅读确认提示，确保了解删除的影响后再执行。</p><hr><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><h3 id="工作空间规划建议" tabindex="-1">工作空间规划建议 <a class="header-anchor" href="#工作空间规划建议" aria-label="Permalink to &quot;工作空间规划建议&quot;">​</a></h3><p><strong>按环境划分</strong> 建议按开发、测试、预发布、生产等环境创建独立的工作空间，实现环境隔离。</p><p><strong>命名规范</strong> 建立统一的 Namespace 命名规范，例如：<code>{项目简称}-{环境}-{用途}</code>，如 <code>app-prod-api</code>、<code>app-dev-frontend</code>。</p><p><strong>资源配额预估</strong> 根据应用的资源需求合理设置配额，避免过度分配或配额不足。</p><h3 id="限制策略配置建议" tabindex="-1">限制策略配置建议 <a class="header-anchor" href="#限制策略配置建议" aria-label="Permalink to &quot;限制策略配置建议&quot;">​</a></h3><p><strong>设置合理的默认值</strong> 为容器设置合理的默认资源请求和限制，避免开发者忘记配置导致的问题。</p><p><strong>防止资源滥用</strong> 通过 Pod 和容器的最大限制，防止单个工作负载占用过多资源。</p><p><strong>保证基本资源</strong> 通过最小资源限制，确保每个 Pod/容器都有基本的运行资源。</p><h3 id="迁移操作建议" tabindex="-1">迁移操作建议 <a class="header-anchor" href="#迁移操作建议" aria-label="Permalink to &quot;迁移操作建议&quot;">​</a></h3><p><strong>批量规划</strong> 对于大量需要迁移的工作空间，建议先制定迁移计划，明确每个工作空间的目标项目。</p><p><strong>配额检查</strong> 迁移前检查目标项目的配额是否充足，避免迁移失败。</p><p><strong>非高峰期操作</strong> 虽然迁移不影响集群，但建议在非业务高峰期执行，便于观察和处理可能的问题。</p><hr><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="为什么创建工作空间失败" tabindex="-1">为什么创建工作空间失败？ <a class="header-anchor" href="#为什么创建工作空间失败" aria-label="Permalink to &quot;为什么创建工作空间失败？&quot;">​</a></h3><p><strong>可能原因 1</strong>：资源池配额不足。检查资源池的剩余配额是否满足新工作空间的需求。</p><p><strong>可能原因 2</strong>：Namespace 名称冲突。检查集群中是否已存在同名的 Namespace。</p><p><strong>可能原因 3</strong>：Namespace 命名不符合规范。确保名称以小写字母开头，只包含小写字母和连字符，以字母结尾。</p><h3 id="为什么无法迁移工作空间" tabindex="-1">为什么无法迁移工作空间？ <a class="header-anchor" href="#为什么无法迁移工作空间" aria-label="Permalink to &quot;为什么无法迁移工作空间？&quot;">​</a></h3><p><strong>可能原因 1</strong>：目标项目没有对应集群的资源池。需要先为目标项目分配该集群的资源。</p><p><strong>可能原因 2</strong>：目标项目配额不足。需要增加目标项目的配额或减少工作空间的资源占用。</p><h3 id="监控数据为什么显示为空" tabindex="-1">监控数据为什么显示为空？ <a class="header-anchor" href="#监控数据为什么显示为空" aria-label="Permalink to &quot;监控数据为什么显示为空？&quot;">​</a></h3><p><strong>可能原因 1</strong>：集群未配置 Prometheus。需要在集群的中间件管理中配置并启用 Prometheus。</p><p><strong>可能原因 2</strong>：Prometheus 连接异常。检查 Prometheus 服务状态和网络连通性。</p><p><strong>可能原因 3</strong>：工作空间内没有运行中的 Pod。只有运行中的工作负载才会产生监控数据。</p><h3 id="删除工作空间后数据能否恢复" tabindex="-1">删除工作空间后数据能否恢复？ <a class="header-anchor" href="#删除工作空间后数据能否恢复" aria-label="Permalink to &quot;删除工作空间后数据能否恢复？&quot;">​</a></h3><p>工作空间删除后，Namespace 及其内部资源会被 Kubernetes 级联删除，这是不可逆的操作。对于 PVC 中的数据，取决于存储类的回收策略（Delete/Retain）。如果使用 Delete 策略，数据会被一并删除；如果使用 Retain 策略，底层存储卷会被保留。</p><p>建议在删除前做好数据备份，重要数据使用 Retain 策略的存储类。</p>`,210)]))}const u=o(n,[["render",s]]);export{c as __pageData,u as default};
