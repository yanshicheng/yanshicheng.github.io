import{_ as e,c as a,o as t,aM as r}from"./chunks/framework.DvFTVADX.js";const g=JSON.parse('{"title":"集群节点管理","description":"","frontmatter":{"title":"集群节点管理","author":{"name":"Yan Shicheng","link":"https://www.ikubeops.com"},"date":"2026-01-16T16:00:00.000Z","permalink":"/nova/nodeManager","categories":["kube-nova"],"tags":["kube-nova"]},"headers":[],"relativePath":"nova/nodeManager.md","filePath":"01.指南/10.使用/04.节点管理.md","lastUpdated":1768731971000}'),n={name:"nova/nodeManager.md"};function i(l,o,d,s,c,p){return t(),a("div",null,o[0]||(o[0]=[r('<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /01.指南/10.使用/04.节点管理.md for this page in Markdown format</div><h1 id="集群节点管理" tabindex="-1">集群节点管理 <a class="header-anchor" href="#集群节点管理" aria-label="Permalink to &quot;集群节点管理&quot;">​</a></h1><p>本文档介绍如何在 Kube Nova 平台中管理 Kubernetes 集群的节点（Node），包括节点列表查看、节点监控、节点详情管理、标签/注解/污点配置以及节点维护操作等功能。</p><p>✨ <strong>特性:</strong></p><ul><li>监控</li><li>YAML 详情</li><li>节点维护</li><li>启用/禁用调度</li><li>标签管理</li><li>污点管理</li><li>注解管理</li></ul><p><strong>操作路径</strong>：集群管理 → 集群节点 → 选择对应的集群</p><h2 id="节点列表" tabindex="-1">节点列表 <a class="header-anchor" href="#节点列表" aria-label="Permalink to &quot;节点列表&quot;">​</a></h2><p>节点列表页面展示集群中所有节点的概览信息，支持卡片视图和列表视图两种展示方式。</p><h3 id="节点卡片信息" tabindex="-1">节点卡片信息 <a class="header-anchor" href="#节点卡片信息" aria-label="Permalink to &quot;节点卡片信息&quot;">​</a></h3><p>每个节点以卡片形式展示以下关键信息：</p><ul><li><strong>节点标识</strong>：节点名称（如 <code>nova-24.ikubeops.local</code>）和 IP 地址（如 <code>172.16.1.24</code>）。</li><li><strong>节点角色</strong>：「Worker」表示工作节点，负责运行业务 Pod；「Control Plane」表示控制平面节点，运行 Kubernetes 核心组件。</li><li><strong>运行状态</strong>：显示节点当前状态，「运行中」表示节点正常工作。</li><li><strong>调度状态</strong>：「可调度」表示节点可以接收新的 Pod 调度；「禁止调度」表示节点已被设置为不可调度状态。</li><li><strong>资源使用</strong>：以进度条和百分比形式展示 CPU 使用率、内存使用率、Pod 数量（当前/最大容量）。</li><li><strong>节点信息</strong>：显示节点架构（如 amd64）和加入集群的时间。</li></ul><h3 id="节点快捷操作" tabindex="-1">节点快捷操作 <a class="header-anchor" href="#节点快捷操作" aria-label="Permalink to &quot;节点快捷操作&quot;">​</a></h3><p>点击节点卡片右上角的菜单按钮（三个点），可执行以下快捷操作：</p><p><strong>禁用调度</strong>：将节点设置为不可调度状态（CordonNode），新的 Pod 将不会被调度到该节点，但已运行的 Pod 不受影响。</p><p><strong>节点维护</strong>：进入节点维护模式（Drain），会安全驱逐节点上的 Pod 并禁止新的调度，适用于节点升级或硬件维护场景。</p><hr><h2 id="节点监控" tabindex="-1">节点监控 <a class="header-anchor" href="#节点监控" aria-label="Permalink to &quot;节点监控&quot;">​</a></h2><p>节点监控页面提供单个节点的详细性能监控数据。</p><p>核心指标：</p><ul><li>CPU 使用率</li><li>内存使用</li><li>磁盘使用</li><li>网络流量</li><li>Pod 状态</li><li>Kubernetes 节点信息</li><li>系统监控</li><li>Pod CPU Top 榜</li><li>Pod 内存 Top 榜 <strong>操作路径</strong>：节点卡片 → 监控按钮</li></ul><hr><h2 id="节点管理" tabindex="-1">节点管理 <a class="header-anchor" href="#节点管理" aria-label="Permalink to &quot;节点管理&quot;">​</a></h2><h3 id="基本信息" tabindex="-1">基本信息 <a class="header-anchor" href="#基本信息" aria-label="Permalink to &quot;基本信息&quot;">​</a></h3><ul><li><strong>基本信息区域</strong>：节点名称、主机名、节点 UUID、IP 地址、节点角色（worker/control-plane）、状态（Ready/NotReady）、调度状态（允许调度/禁止调度）、加入时间。</li><li><strong>系统信息区域</strong>：操作系统（如 linux）、系统镜像（如 Ubuntu 24.04.2 LTS）、内核版本（如 6.8.0-90-generic）、架构（如 amd64）、容器运行时（如 containerd://2.2.0）、Kubelet 版本（如 v1.34.2）、GPU 支持（是/否）。</li><li><strong>资源配置区域</strong>：CPU 核心数、内存容量、Pod 容量（该节点最大可运行的 Pod 数量）。</li><li><strong>网络信息区域</strong>：Pod CIDR（分配给该节点的 Pod 网段）、Pod CIDRs（包含 IPv4 和 IPv6 的完整网段配置）。 <img src="https://images.ikubeops.com/static/20260117000732231.png" alt="基本信息" loading="lazy"></li></ul><h3 id="标签管理" tabindex="-1">标签管理 <a class="header-anchor" href="#标签管理" aria-label="Permalink to &quot;标签管理&quot;">​</a></h3><p>标签（Labels）用于对节点进行分类和选择，是 Kubernetes 中重要的元数据机制。</p><ul><li><strong>操作功能</strong>：添加标签、刷新标签列表、搜索标签。</li><li><strong>标签列表</strong>展示以下信息：键（Key）、值（Value）、类型、操作。</li><li><strong>标签类型</strong>分为两种： <ul><li>「可管理标签」是用户自定义的标签，可以自由编辑和删除，用于业务需求如节点选择、调度约束等。</li><li>「系统保护标签」由 Kubernetes 系统自动生成和管理，不可修改或删除。常见的系统标签包括 <code>kubernetes.io/os</code>（操作系统）、<code>kubernetes.io/arch</code>（架构）、<code>kubernetes.io/hostname</code>（主机名）、<code>beta.kubernetes.io/arch</code>（架构兼容标签）、<code>beta.kubernetes.io/os</code>（操作系统兼容标签）。 <img src="https://images.ikubeops.com/static/20260117000909182.png" alt="image.png" loading="lazy"></li></ul></li></ul><h3 id="注解管理" tabindex="-1">注解管理 <a class="header-anchor" href="#注解管理" aria-label="Permalink to &quot;注解管理&quot;">​</a></h3><p>注解（Annotations）用于存储节点的附加元数据信息，通常由系统组件或工具自动添加。</p><p><strong>操作功能</strong>：添加注解、刷新注解列表、搜索注解、复制注解值。</p><p>常见的系统注解包括：<code>volumes.kubernetes.io/controller-managed-attach-detach</code>（卷挂载管理）、<code>csi.volume.kubernetes.io/nodeid</code>（CSI 节点标识）、<code>node.alpha.kubernetes.io/ttl</code>（节点 TTL）、<code>projectcalico.org/IPv4Address</code>（Calico 网络 IPv4 地址）。</p><p>注解与标签类似，也分为「可管理注解」和「系统保护注解」两种类型。 <img src="https://images.ikubeops.com/static/20260117000937974.png" alt="image.png" loading="lazy"></p><h3 id="污点管理" tabindex="-1">污点管理 <a class="header-anchor" href="#污点管理" aria-label="Permalink to &quot;污点管理&quot;">​</a></h3><p>污点（Taints）用于控制 Pod 的调度行为，可以阻止特定 Pod 调度到节点上。</p><p><strong>污点效果类型</strong>：</p><ul><li>「NoSchedule」不允许新的 Pod 调度到该节点，已存在的 Pod 不受影响。这是最常用的污点效果，适用于需要隔离特定工作负载的场景。</li><li>「PreferNoSchedule」尽量避免将 Pod 调度到该节点，但不是强制的。当没有其他可用节点时，Pod 仍可能被调度到此节点。</li><li>「NoExecute」不允许新的 Pod 调度到该节点，并且驱逐已存在的 Pod。这是最严格的污点效果，适用于节点维护或故障隔离场景。</li></ul><p><strong>操作功能</strong>：添加污点、刷新污点列表、编辑污点、删除污点。</p><p><strong>污点示例</strong>：<code>nvidia.com/gpu=true:NoSchedule</code> 表示该节点配置了 GPU 污点，只有带有对应容忍（Toleration）的 Pod 才能调度到此节点，通常用于 GPU 节点的专用调度。 <img src="https://images.ikubeops.com/static/20260117001023252.png" alt="image.png" loading="lazy"></p><hr><h2 id="节点维护操作" tabindex="-1">节点维护操作 <a class="header-anchor" href="#节点维护操作" aria-label="Permalink to &quot;节点维护操作&quot;">​</a></h2><h3 id="禁用调度-cordon" tabindex="-1">禁用调度（Cordon） <a class="header-anchor" href="#禁用调度-cordon" aria-label="Permalink to &quot;禁用调度（Cordon）&quot;">​</a></h3><p>禁用调度会将节点标记为不可调度状态，新的 Pod 将不会被调度到该节点。</p><p><strong>使用场景</strong>：计划进行节点维护但不需要立即驱逐现有 Pod、临时隔离节点进行问题排查、为后续的 Drain 操作做准备。</p><p><strong>操作方式</strong>：节点卡片菜单 → 禁用调度。</p><p>执行后节点的调度状态将从「可调度」变为「禁止调度」。</p><h3 id="启用调度-uncordon" tabindex="-1">启用调度（Uncordon） <a class="header-anchor" href="#启用调度-uncordon" aria-label="Permalink to &quot;启用调度（Uncordon）&quot;">​</a></h3><p>启用调度会将节点恢复为可调度状态。</p><p><strong>使用场景</strong>：节点维护完成后恢复正常调度、问题排查结束后恢复节点服务。</p><p><strong>操作方式</strong>：节点卡片菜单 → 启用调度（当节点处于禁止调度状态时显示）。</p><h3 id="节点维护-drain" tabindex="-1">节点维护（Drain） <a class="header-anchor" href="#节点维护-drain" aria-label="Permalink to &quot;节点维护（Drain）&quot;">​</a></h3><p>节点维护会安全地驱逐节点上的所有 Pod，并将节点设置为不可调度状态。</p><p><strong>使用场景</strong>：节点硬件维护或升级、Kubernetes 版本升级、操作系统更新或重启。</p><p><strong>操作方式</strong>：节点卡片菜单 → 节点维护。</p><p><strong>注意事项</strong>：Drain 操作会尝试优雅终止 Pod，遵守 PodDisruptionBudget 配置；DaemonSet 管理的 Pod 默认会被忽略；维护完成后需要手动执行「启用调度」恢复节点。</p>',54)]))}const u=e(n,[["render",i]]);export{g as __pageData,u as default};
